<?php

declare(strict_types=1);

use Phinx\Seed\AbstractSeed;

class BlogSeeder extends AbstractSeed
{
    private string $suffix;

    public function run(): void
    {
        $categoryIds = $this->seedCategories();
        $postIds  = $this->seedPosts();

        $this->seedPostCategories($postIds, $categoryIds);
    }

    // -------------------------------------------------------------------------
    // Helpers
    // -------------------------------------------------------------------------

    private function seedCategories(): array
    {
        $categories = [
            [
                'name'        => 'Технологии',
                'slug'        => 'technologies',
                'description' => 'Последние новости и обзоры из мира информационных технологий: '
                               . 'искусственный интеллект, облачные сервисы, кибербезопасность и многое другое.',
                'created_at'  => '2025-09-01 10:00:00',
                'updated_at'  => '2025-09-01 10:00:00',
            ],
            [
                'name'        => 'Разработка',
                'slug'        => 'development',
                'description' => 'Статьи для разработчиков: лучшие практики программирования, '
                               . 'архитектурные паттерны, обзоры фреймворков и инструментов.',
                'created_at'  => '2025-09-01 10:05:00',
                'updated_at'  => '2025-09-01 10:05:00',
            ],
            [
                'name'        => 'Дизайн',
                'slug'        => 'design',
                'description' => 'UI/UX дизайн, графика, типографика и всё о визуальных коммуникациях '
                               . 'в цифровой среде.',
                'created_at'  => '2025-09-01 10:10:00',
                'updated_at'  => '2025-09-01 10:10:00',
            ],
            [
                'name'        => 'Бизнес',
                'slug'        => 'business',
                'description' => 'Стратегии роста, управление командами, маркетинг и финансы — '
                               . 'всё, что нужно знать современному предпринимателю.',
                'created_at'  => '2025-09-01 10:15:00',
                'updated_at'  => '2025-09-01 10:15:00',
            ],
            [
                'name'        => 'Наука',
                'slug'        => 'science',
                'description' => 'Открытия учёных, научно-популярные материалы и аналитика '
                               . 'о состоянии современной науки.',
                'created_at'  => '2025-09-01 10:20:00',
                'updated_at'  => '2025-09-01 10:20:00',
            ],
        ];

        $this->table('categories')->insert($categories)->saveData();

        $rows = $this->fetchAll('SELECT id, slug FROM categories ORDER BY id');
        $ids  = [];
        foreach ($rows as $row) {
            // strip suffix to keep map keys consistent with post mapping
            $baseSlug        = substr($row['slug'], 0, -7); // '-' + 6 chars
            $ids[$baseSlug]  = (int) $row['id'];
        }

        return $ids;
    }

    private function seedPosts(): array
    {
        $posts = [
            // ---- Технологии ----
            [
                'title'       => 'Как GPT-4o меняет рынок труда: угрозы и возможности',
                'slug'        => 'gpt-4o-labor-market',
                'image'       => 'https://images.unsplash.com/photo-1677442135703-1787eea5ce01?w=1280&q=80',
                'description' => 'Крупнейшие консалтинговые агентства опубликовали прогнозы: к 2030 году '
                               . 'до 30 % рутинных задач в офисах будут автоматизированы с помощью LLM. '
                               . 'Разбираемся, кто окажется в зоне риска, а кто — в выигрыше.',
                'text'        => "Ещё несколько лет назад разговоры об ИИ, заменяющем белых воротничков, казались фантастикой. Сегодня компании от стартапов до Fortune 500 уже перестраивают рабочие процессы под новую реальность.\n\n## Что изменилось с выходом GPT-4o\n\nМодель умеет одновременно обрабатывать текст, изображения и аудио в едином диалоге. Это открывает возможности, недоступные предыдущим поколениям: реал-тайм перевод переговоров, мгновенный анализ финансовых отчётов по скриншоту, генерация рекламных кампаний из брифа за минуты.\n\n## Кто под угрозой\n\nПо данным McKinsey, наиболее уязвимы позиции, связанные с обработкой данных и стандартным взаимодействием с клиентами: операторы колл-центров, младшие аналитики, переводчики типовых документов. В зоне риска также начальные позиции в юридических и бухгалтерских фирмах.\n\n## Новые профессии\n\nПараллельно растёт спрос на prompt-инженеров, специалистов по оценке качества ИИ-выводов (AI QA) и экспертов по этике алгоритмов. Компании готовы платить за эти роли на 20–40 % выше рынка.\n\n## Что делать прямо сейчас\n\nЭксперты советуют сфокусироваться на навыках, которые сложно автоматизировать: критическое мышление, межличностные коммуникации, творческое решение задач. И, конечно, освоить сами ИИ-инструменты — пользователи, умеющие эффективно работать с LLM, уже сейчас выигрывают конкурентную борьбу.",
                'views'       => 4821,
                'created_at'  => '2025-10-03 09:00:00',
                'updated_at'  => '2025-10-03 09:00:00',
            ],
            [
                'title'       => 'Квантовые компьютеры: где мы находимся в 2025 году',
                'slug'        => 'quantum-computers-2025',
                'image'       => 'https://images.unsplash.com/photo-1635070041078-e363dbe005cb?w=1280&q=80',
                'description' => 'Google, IBM и стартапы наперебой заявляют о прорывах в квантовых '
                               . 'вычислениях. Отделяем маркетинг от реальных достижений и объясняем, '
                               . 'когда технология станет коммерчески применимой.',
                'text'        => "Квантовые компьютеры обещают революцию в криптографии, фармацевтике и логистике. Но каждый год мы слышим одно и то же: «прорыв совсем близко». Давайте разберёмся объективно.\n\n## Текущее состояние\n\nIBM достигла отметки в 1 000 кубитов со своим процессором Condor. Google анонсировала систему Willow, которая якобы решила задачу за 5 минут, на которую классическому компьютеру потребовалось бы 10 септиллионов лет. Звучит впечатляюще, но речь идёт о специально подобранной синтетической задаче.\n\n## Проблема шума\n\nГлавная техническая проблема — декогеренция. Кубиты чрезвычайно чувствительны к внешним воздействиям и быстро теряют квантовое состояние. Текущие системы требуют охлаждения до температур, близких к абсолютному нулю, и всё равно допускают ошибки на каждые несколько операций.\n\n## Когда ждать практического применения\n\nРеалистичный горизонт для решения прикладных задач — конец 2020-х. Первые области применения: оптимизация логистических цепочек, симуляция молекул для создания лекарств, ускорение обучения нейронных сетей.",
                'views'       => 3102,
                'created_at'  => '2025-10-15 11:30:00',
                'updated_at'  => '2025-10-15 11:30:00',
            ],

            // ---- Разработка ----
            [
                'title'       => 'SOLID на практике: разбираем принципы на реальных примерах PHP',
                'slug'        => 'solid-principles-php',
                'image'       => 'https://images.unsplash.com/photo-1542831371-29b0f74f9713?w=1280&q=80',
                'description' => 'Принципы SOLID знает каждый разработчик — но понимают их единицы. '
                               . 'Разбираем каждый принцип на конкретном PHP-коде: что нарушено и как исправить.',
                'text'        => "Пять принципов SOLID — фундамент объектно-ориентированного проектирования. Однако на собеседованиях кандидаты часто могут их перечислить, но не могут объяснить, где именно нарушен принцип в показанном коде.\n\n## S — Single Responsibility\n\nКласс должен иметь только одну причину для изменения. Пример нарушения — класс `UserManager`, который одновременно валидирует данные, сохраняет в базу и отправляет email. Решение: разбить на `UserValidator`, `UserRepository` и `UserNotifier`.\n\n## O — Open/Closed\n\nКод должен быть открыт для расширения и закрыт для изменения. Вместо цепочки `if/elseif` по типу оплаты — интерфейс `PaymentMethod` с реализациями `StripePayment`, `PayPalPayment`. Новый метод оплаты добавляется без правок существующего кода.\n\n## L — Liskov Substitution\n\nПодклассы должны быть взаимозаменяемы с базовым классом. Классический пример нарушения: `Square extends Rectangle`, где установка высоты ломает инвариант прямоугольника.\n\n## I — Interface Segregation\n\nНе заставляйте классы реализовывать методы, которые им не нужны. Толстый интерфейс `Animal` с методами `fly()`, `swim()`, `run()` — плохая идея. Разбейте на `Flyable`, `Swimmable`, `Runnable`.\n\n## D — Dependency Inversion\n\nЗависеть нужно от абстракций, а не от конкреций. Внедряйте зависимости через конструктор, а не создавайте объекты внутри класса через `new`. Это упрощает тестирование и замену реализаций.",
                'views'       => 7654,
                'created_at'  => '2025-11-02 08:00:00',
                'updated_at'  => '2025-11-02 08:00:00',
            ],
            [
                'title'       => 'Docker Compose для локальной разработки: полный гайд 2025',
                'slug'        => 'docker-compose-local-dev-2025',
                'image'       => 'https://images.unsplash.com/photo-1605745341112-85968b19335b?w=1280&q=80',
                'description' => 'Настраиваем окружение для PHP + MySQL + Redis + Nginx с нуля. '
                               . 'Разбираем типичные ошибки, hot reload, volume mounts и работу с несколькими проектами одновременно.',
                'text'        => "Docker Compose давно стал стандартом для настройки локального окружения. Но большинство туториалов показывают упрощённые конфиги, с которыми потом возникают проблемы на реальных проектах.\n\n## Структура проекта\n\nРекомендуемая структура: держать `docker-compose.yml` в корне репозитория рядом с кодом. Папку `.docker/` использовать для Dockerfile и конфигурационных файлов сервисов (nginx.conf, php.ini).\n\n## PHP-FPM + Nginx\n\nКлючевой момент: PHP-FPM и Nginx должны использовать один и тот же volume с кодом. Nginx обрабатывает статику сам, а PHP-запросы проксирует на `php:9000` через сокет или TCP.\n\n## Переменные окружения\n\nИспользуйте файл `.env` в корне для хранения значений. Docker Compose автоматически его читает. Никогда не коммитьте секреты — добавьте `.env` в `.gitignore` и держите `.env.example` с заглушками.\n\n## Healthcheck и зависимости\n\nДиректива `depends_on` гарантирует только порядок запуска контейнеров, но не готовность сервиса. Добавляйте `healthcheck` для MySQL и Redis, чтобы приложение не падало при старте.",
                'views'       => 5233,
                'created_at'  => '2025-11-20 14:00:00',
                'updated_at'  => '2025-11-20 14:00:00',
            ],
            [
                'title'       => 'Почему ваш код медленный: профилирование PHP с Xdebug и Blackfire',
                'slug'        => 'php-profiling-xdebug-blackfire',
                'image'       => 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=1280&q=80',
                'description' => 'Интуиция обманывает. Реальные узкие места находятся там, где вы '
                               . 'не ожидаете. Показываем, как находить и устранять проблемы производительности.',
                'text'        => "«Оптимизируй узкие места» — совет хороший, но бесполезный без понимания, где эти места. Профилировщик — ваш главный инструмент.\n\n## Xdebug для начала\n\nУстановите расширение, включите `xdebug.mode=profile`, и при следующем запросе получите файл cachegrind. Откройте его в QCacheGrind или KCacheGrind — увидите дерево вызовов с временем выполнения каждой функции.\n\n## Blackfire для продакшена\n\nXdebug замедляет приложение в 50–100 раз — неприемлемо для боевой среды. Blackfire агент работает с накладными расходами менее 1 % и предоставляет удобный веб-интерфейс с рекомендациями по оптимизации.\n\n## Типичные находки\n\nВ 80 % случаев проблема — это N+1 запросы к базе данных: ORM загружает коллекцию, затем в цикле дозапрашивает связанные модели. Решение — жадная загрузка (`eager loading`).\n\n## Кэширование результатов\n\nКогда узкое место найдено и не может быть устранено иначе — кэшируйте. Redis с TTL 60 секунд убирает 95 % лишних запросов для данных, которые меняются редко.",
                'views'       => 2987,
                'created_at'  => '2025-12-05 10:00:00',
                'updated_at'  => '2025-12-05 10:00:00',
            ],

            // ---- Дизайн ----
            [
                'title'       => 'Типографика в вебе 2025: переменные шрифты и fluid typography',
                'slug'        => 'web-typography-variable-fonts-2025',
                'image'       => 'https://images.unsplash.com/photo-1524178232363-1fb2b075b655?w=1280&q=80',
                'description' => 'Переменные шрифты наконец стали нормой. Объясняем, как использовать font-variation-settings и clamp() для отзывчивой типографики без медиазапросов.',
                'text'        => "Ещё в 2018 году переменные шрифты поддерживались лишь в Chrome Canary. Сегодня поддержка браузерами составляет 98 %, и игнорировать эту технологию попросту нецелесообразно.\n\n## Что такое переменные шрифты\n\nОдин файл .woff2 содержит всю ось вариации: вес от 100 до 900, ширину, наклон. Вместо загрузки 8 начертаний — один файл размером чуть больше обычного. Экономия трафика и HTTP-запросов существенная.\n\n## Fluid Typography с clamp()\n\nФункция `clamp(min, preferred, max)` позволяет сделать размер шрифта плавно изменяющимся в зависимости от ширины вьюпорта. Формула: `clamp(1rem, 2.5vw + 0.5rem, 2rem)`. Никаких медиазапросов для типографики.\n\n## Практический пример\n\nДля заголовков используйте `font-size: clamp(1.5rem, 4vw, 3rem)`. Для тела — `clamp(1rem, 1.5vw + 0.5rem, 1.25rem)`. Текст будет читаемым и на мобильном, и на 4K-мониторе без единого медиазапроса.\n\n## Оси вариации\n\nКроме стандартной оси `wght` (вес), шрифты могут поддерживать `wdth` (ширина), `ital` (курсив), `slnt` (наклон), `opsz` (оптический размер). Последняя автоматически подстраивает детализацию под размер текста.",
                'views'       => 1843,
                'created_at'  => '2025-11-10 09:30:00',
                'updated_at'  => '2025-11-10 09:30:00',
            ],
            [
                'title'       => 'Цветовые системы в дизайне продуктов: от теории к токенам',
                'slug'        => 'color-systems-design-tokens',
                'image'       => 'https://images.unsplash.com/photo-1541701494587-cb58502866ab?w=1280&q=80',
                'description' => 'Как построить масштабируемую цветовую систему для продукта, '
                               . 'который поддерживает тёмную тему, несколько брендов и доступность по WCAG 2.1 AA.',
                'text'        => "Цветовая система — один из самых критичных, но часто недооценённых компонентов дизайн-системы. Плохо спроектированная палитра — источник бесконечных дискуссий и несогласованного UI.\n\n## Три уровня абстракции\n\nУровень 1 — глобальные токены: все цвета бренда как переменные (`--blue-500: #3B82F6`). Уровень 2 — семантические токены: назначение цвета (`--color-primary: var(--blue-500)`). Уровень 3 — компонентные токены: контекст использования (`--button-bg: var(--color-primary)`).\n\n## Тёмная тема без боли\n\nИспользуйте семантические токены — и тёмная тема сводится к переопределению их значений в `[data-theme='dark']`. Привязываться к конкретным цветам в компонентах — путь к сотням строк переопределений.\n\n## WCAG и доступность\n\nСтандарт AA требует контраст не менее 4.5:1 для обычного текста и 3:1 для крупного. Инструменты Stark и Colour Contrast Analyser помогут проверить все комбинации. Встраивайте проверку в дизайн-токены на уровне документации.",
                'views'       => 2214,
                'created_at'  => '2025-12-01 13:00:00',
                'updated_at'  => '2025-12-01 13:00:00',
            ],

            // ---- Бизнес ----
            [
                'title'       => 'Как построить команду разработки с нуля: опыт трёх стартапов',
                'slug'        => 'building-dev-team-startup',
                'image'       => 'https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=1280&q=80',
                'description' => 'Первый найм — самый важный. Делимся реальным опытом: где искать, '
                               . 'как оценивать и удерживать сильных разработчиков в условиях ограниченного бюджета.',
                'text'        => "Большинство стартапов делают одну и ту же ошибку: нанимают сразу сеньора «чтобы всё сделал правильно». Это дорого и часто контрпродуктивно — опытный разработчик хочет сложных задач, а не верстки лендинга.\n\n## Первый найм: мидл + ментор\n\nОптимальная формула для первой команды: один мидл на полную занятость и один опытный советник на несколько часов в неделю. Мидл делает работу, советник помогает избежать архитектурных ошибок.\n\n## Где искать\n\nLinkedin хорошо работает для пассивных кандидатов. Тематические Telegram-каналы — для активно ищущих. Хакатоны и митапы — для нетворкинга с лучшими. Рефералы от текущей команды — самый качественный канал с самой низкой стоимостью найма.\n\n## Оценка на интервью\n\nОткажитесь от алгоритмических задачек, если ищете прикладного разработчика. Лучше дайте реальную задачу из вашего проекта, наблюдайте за процессом мышления, умением задавать вопросы и признавать незнание.\n\n## Удержание без больших зарплат\n\nИсследования показывают: после определённого порога деньги перестают быть главным мотиватором. Важнее — интересные задачи, автономия, рост и команда. Инвестируйте в обучение и давайте ответственность.",
                'views'       => 3891,
                'created_at'  => '2025-10-20 12:00:00',
                'updated_at'  => '2025-10-20 12:00:00',
            ],
            [
                'title'       => 'Product-Led Growth: как Slack, Figma и Notion захватили рынок без отдела продаж',
                'slug'        => 'product-led-growth-examples',
                'image'       => 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=1280&q=80',
                'description' => 'PLG — это когда сам продукт привлекает, конвертирует и удерживает пользователей. '
                               . 'Разбираем механику на примерах компаний, ставших единорогами благодаря этой стратегии.',
                'text'        => "В традиционной модели SaaS продажи ведёт отдел продаж: демо, переговоры, договор. Product-Led Growth переворачивает воронку: пользователь сначала получает ценность, и только потом платит.\n\n## Freemium как точка входа\n\nFigma позволяла одному дизайнеру работать бесплатно. Когда он приглашал коллегу на ревью — тот регистрировался. Так команды органически «заражались» продуктом. Момент конверсии — когда нужно пригласить больше людей или работать в нескольких проектах.\n\n## Вирусные петли\n\nSlack создаёт ценность только в команде — это встроенная вирусность. Notion позволяет публиковать страницы и делиться шаблонами. Каждый пользователь становится каналом дистрибуции.\n\n## Метрики PLG\n\nКлючевые показатели: Time-to-Value (как быстро новый пользователь получает первую ценность), Product Qualified Lead (PQL) — пользователь, достигший определённых действий в продукте, и виральный коэффициент.\n\n## Когда PLG не работает\n\nСтратегия неприменима для сложных enterprise-решений с долгим онбордингом и множеством стейкхолдеров. Также затруднена в высокорегулируемых отраслях (финансы, медицина), где пробный период невозможен.",
                'views'       => 4102,
                'created_at'  => '2025-11-05 15:00:00',
                'updated_at'  => '2025-11-05 15:00:00',
            ],

            // ---- Наука ----
            [
                'title'       => 'Редактирование генома CRISPR в 2025: что уже стало реальностью',
                'slug'        => 'crispr-genome-editing-2025',
                'image'       => 'https://images.unsplash.com/photo-1530026186672-2cd00ffc50fe?w=1280&q=80',
                'description' => 'Первые терапии на основе CRISPR одобрены регуляторами. '
                               . 'Рассказываем, какие болезни уже лечат редактированием генома и какие этические вопросы остаются открытыми.',
                'text'        => "В декабре 2023 года FDA одобрило первые в истории препараты на основе технологии CRISPR — лечение серповидноклеточной анемии и бета-талассемии. С тех пор список показаний расширяется каждый год.

## Как работает CRISPR-Cas9

Технология использует молекулярные «ножницы»: направляющая РНК ведёт белок Cas9 к точному месту в ДНК, где тот делает разрез. Клетка чинит разрыв — и в процессе можно вставить нужную последовательность или отключить ген.

## Одобренные терапии

Casgevy (Vertex и CRISPR Therapeutics) исправляет дефектный ген HBB у пациентов с серповидноклеточной анемией. Клинические данные: более 90 % пациентов не имеют болевых кризов в течение года после терапии.

## На горизонте

Клинические испытания идут для лечения нескольких форм рака, болезни Хантингтона, мышечной дистрофии Дюшенна. Отдельное направление — редактирование ДНК вирусов (ВИЧ, герпес), чтобы полностью вывести их из организма.

## Этика и риски

Главный страх — «дизайнерские дети»: редактирование зародышевых клеток, которое передаётся по наследству. После скандала с Хэ Цзянькуем большинство стран ввели мораторий на такие эксперименты. Сообщество учёных настаивает на чётком разграничении терапии соматических клеток и изменений, затрагивающих следующие поколения.",
                'views'       => 5540,
                'created_at'  => '2025-09-25 08:00:00',
                'updated_at'  => '2025-09-25 08:00:00',
            ],
            [
                'title'       => 'Тёмная материя: чего мы не знаем спустя 90 лет поисков',
                'slug'        => 'dark-matter-90-years',
                'image'       => 'https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=1280&q=80',
                'description' => 'Тёмная материя составляет 27 % Вселенной, но до сих пор не обнаружена '
                               . 'напрямую. Рассказываем о самых перспективных гипотезах и последних экспериментах.',
                'text'        => "Фриц Цвикки предположил существование тёмной материи в 1933 году, наблюдая за движением галактик в скоплении Кома. С тех пор косвенных свидетельств стало на порядки больше — но прямого детектирования нет до сих пор.

## Почему мы уверены в её существовании

Скорости вращения галактик, гравитационное линзирование, структура крупномасштабной сети Вселенной — всё это не согласуется с видимой материей. Либо ньютоновская гравитация неверна на больших масштабах (MOND), либо есть невидимая материя.

## Кандидаты: WIMPs и аксионы

WIMP (Weakly Interacting Massive Particles) — самая популярная гипотеза 1990-х. Детекторы LUX-ZEPLIN и XENONnT ищут их прямые столкновения с атомами ксенона, охлаждёнными до долей кельвина. Пока — ничего. Аксионы — лёгкие частицы, предсказанные для решения совсем другой проблемы. Эксперимент ADMX пытается их обнаружить через конвертацию в фотоны в магнитном поле.

## Первичные чёрные дыры

После открытия гравитационных волн LIGO интерес к первичным чёрным дырам как кандидатам в тёмную материю возрос. Наблюдения показали, что они не могут составлять более нескольких процентов от общей массы тёмной материи — но не исключают их роли полностью.

## Что дальше

Телескоп Euclid, запущенный в 2023 году, строит трёхмерную карту Вселенной — это поможет лучше понять распределение тёмной материи. Параллельно физики не теряют надежды найти WIMPs на Большом адронном коллайдере в ходе Run 3.",
                'views'       => 3675,
                'created_at'  => '2025-12-10 16:00:00',
                'updated_at'  => '2025-12-10 16:00:00',
            ],
        ];

        foreach ($posts as &$post) {
            $post['slug'] .= "-{$this->suffix}";
        }
        unset($post);

        $this->table('posts')->insert($posts)->saveData();

        $rows = $this->fetchAll('SELECT id, slug FROM posts ORDER BY id');
        $ids  = [];
        foreach ($rows as $row) {
            $baseSlug       = substr($row['slug'], 0, -7); // '-' + 6 chars
            $ids[$baseSlug] = (int) $row['id'];
        }

        return $ids;
    }

    /**
     * Map posts to categories (many-to-many).
     *
     * @param array<string,int> $postIds
     * @param array<string,int> $categoryIds
     */
    private function seedPostCategories(array $postIds, array $categoryIds): void
    {
        $map = [
            // Technologies
            'gpt-4o-labor-market'             => ['technologies', 'business'],
            'quantum-computers-2025'          => ['technologies', 'science'],

            // Development
            'solid-principles-php'            => ['development'],
            'docker-compose-local-dev-2025'   => ['development', 'technologies'],
            'php-profiling-xdebug-blackfire'  => ['development'],

            // Design
            'web-typography-variable-fonts-2025' => ['design'],
            'color-systems-design-tokens'        => ['design'],

            // Business
            'building-dev-team-startup'       => ['business'],
            'product-led-growth-examples'     => ['business'],

            // Science
            'crispr-genome-editing-2025'      => ['science'],
            'dark-matter-90-years'            => ['science'],
        ];

        $pivotRows = [];
        foreach ($map as $postSlug => $categorySlugs) {
            foreach ($categorySlugs as $categorySlug) {
                $pivotRows[] = [
                    'post_id'  => $postIds[$postSlug],
                    'category_id' => $categoryIds[$categorySlug],
                ];
            }
        }

        $this->table('post_category')->insert($pivotRows)->saveData();
    }
}
